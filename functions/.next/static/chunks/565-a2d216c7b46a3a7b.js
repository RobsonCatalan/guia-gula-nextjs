"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{1469:(e,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var i in a)Object.defineProperty(e,i,{enumerable:!0,get:a[i]})}(a,{default:function(){return o},getImageProps:function(){return s}});let r=i(8229),n=i(8883),t=i(3063),l=r._(i(1193));function s(e){let{props:a}=(0,n.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,i]of Object.entries(a))void 0===i&&delete a[e];return{props:a}}let o=t.Image},3433:(e,a,i)=>{i.d(a,{HQ:()=>s,xk:()=>l});var r=i(5317),n=i(6104);let t=e=>{var a,i,r,n,t,l,s,o,d,u,c,g,p,f,m,b,h,v,w,C,y,A,x,k;return{id:e.id||"",name:e.name||"",address:(null==(i=e.fiscalInformation)||null==(a=i.fiscalAddress)?void 0:a.formattedAddress)||e.address||"",city:(null==(n=e.guideConfig)||null==(r=n.address)?void 0:r.city)||e.city||"",description:e.description||"",cuisine:e.cuisineType||e.cuisine||"",openingHours:e.openingHours||"Hor\xe1rio n\xe3o dispon\xedvel",imageUrl:e.mainPhoto||e.imageUrl||"/images/placeholder-restaurant.jpg",rating:e.rating||0,priceRange:e.priceRange||"$",phone:(null==(t=e.contactInfo)?void 0:t.phoneNumber)||e.phone||"",website:(null==(l=e.contactInfo)?void 0:l.website)||e.website||"",instagramLink:e.instagramLink||"",logo:e.logo||null,mainPhoto:e.mainPhoto||null,categories:Array.isArray(null==(s=e.guideConfig)?void 0:s.categories)?e.guideConfig.categories:[],addressStreet:(null==(d=e.guideConfig)||null==(o=d.address)?void 0:o.street)||"",addressNumber:(null==(c=e.guideConfig)||null==(u=c.address)?void 0:u.number)||"",addressComplement:(null==(p=e.guideConfig)||null==(g=p.address)?void 0:g.complement)||"",addressDistrict:(null==(m=e.guideConfig)||null==(f=m.address)?void 0:f.district)||"",addressState:(null==(h=e.guideConfig)||null==(b=h.address)?void 0:b.state)||"",postalCode:(null==(w=e.guideConfig)||null==(v=w.address)?void 0:v.postalCode)||"",addressCity:(null==(y=e.guideConfig)||null==(C=y.address)?void 0:C.city)||e.city||"",coordinates:(null==(x=e.guideConfig)||null==(A=x.address)?void 0:A.coordinates)?{latitude:e.guideConfig.address.coordinates.latitude,longitude:e.guideConfig.address.coordinates.longitude}:null,menu:Array.isArray(e.menu)?e.menu:[],workingHours:Array.isArray(null==(k=e.guideConfig)?void 0:k.workingHours)?e.guideConfig.workingHours.map(e=>({weekday:e.weekday,startTime:e.startTime,endTime:e.endTime})):[]}},l=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{let i=(await (0,r.GG)((0,r.P)((0,r.rJ)(n.db,"places"),(0,r.My)("name")))).docs.filter(e=>{var a;return null==(a=e.data().guideConfig)?void 0:a.isVisible});i.sort((e,a)=>(e.data().name||"").localeCompare(a.data().name||""));let l=e?i.findIndex(a=>a.id===e.id)+1:0,s=i.slice(l,l+a),d=s.map(e=>t({id:e.id,...e.data()})),u=s.length?s[s.length-1]:null,c=await o(d.map(e=>e.id));return{restaurants:d.map(e=>{var a,i,r,n;return{...e,rating:null!=(r=null==(a=c[e.id])?void 0:a.avg)?r:0,reviewCount:null!=(n=null==(i=c[e.id])?void 0:i.count)?n:0}}),lastVisible:u}}catch(e){return console.error("Erro ao buscar restaurantes:",e),{restaurants:[],lastVisible:null}}},s=async function(e,a){arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let a=(0,r.P)((0,r.rJ)(n.db,"places"),(0,r.My)("name")),i=await (0,r.GG)(a),l=[];i.forEach(e=>{var a;let i=e.data();(null==(a=i.guideConfig)?void 0:a.isVisible)&&l.push(t({id:e.id,...i}))});let s=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,""),d=s(e),u=l.filter(e=>s(e.city||"")===d),c=await o(u.map(e=>e.id));return{restaurants:u.map(e=>{var a,i,r,n;return{...e,rating:null!=(r=null==(a=c[e.id])?void 0:a.avg)?r:0,reviewCount:null!=(n=null==(i=c[e.id])?void 0:i.count)?n:0}}),lastVisible:null}}catch(e){return console.error("Erro ao buscar restaurantes por cidade:",e),{restaurants:[],lastVisible:null}}},o=async e=>{let a={};for(let i=0;i<e.length;i+=10){let t=e.slice(i,i+10).map(e=>(0,r.H9)(n.db,"places",e)),l=(0,r.P)((0,r.rJ)(n.db,"placeReviews"),(0,r._M)("placeReference","in",t));(await (0,r.GG)(l)).forEach(e=>{let i=e.data(),r=i.rating,n=i.placeReference.id;a[n]||(a[n]={sum:0,count:0}),a[n].sum+=r,a[n].count+=1})}let i={};return Object.entries(a).forEach(e=>{let[a,{sum:r,count:n}]=e;i[a]={avg:parseFloat((r/n).toFixed(1)),count:n}}),i}},4565:(e,a,i)=>{i.d(a,{default:()=>g});var r=i(5155),n=i(2115),t=i(6874),l=i.n(t),s=i(6766),o=i(3433);let d=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,""),u=e=>e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ").replace(/\bSao\b/g,"S\xe3o"),c={barPub:"Bar & Pub",pizza:"Pizzaria",cafeBakeryDesserts:"Caf\xe9 & P\xe3es & Doces",snacksBurgers:"Lanches & Burgers",barbecueGrill:"Churrasco & Grelhados",pastryShop:"Pastelaria",japanese:"Japon\xeas",italian:"Italiano",mineiro:"Mineiro",arabic:"\xc1rabe",selfServiceBuffet:"Self-service & Buffet",seafood:"Frutos do Mar",mexican:"Mexicano",wineBar:"Wine Bar",chinese:"Chin\xeas",portuguese:"Portugu\xeas",veganVegetarian:"Vegano & Vegetariano",brazilian:"Brasileiro",french:"Franc\xeas",peruvian:"Peruano",spanish:"Espanhol",german:"Alem\xe3o",indian:"Indiano",international:"Internacional",healthyJuices:"Saud\xe1vel & Sucos",beachKiosk:"Quiosques & Barracas",deliGourmet:"Emp\xf3rio & Delicatessen",other:"Outros"};function g(e){let{city:a,title:i,currentCategory:t}=e,g=u(a),[p,f]=(0,n.useState)([]),[m,b]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{b(!0);let e=(await (0,o.HQ)(a)).restaurants.flatMap(e=>e.categories||[]),i=Array.from(new Set(e)).map(e=>c[e]||e);f(i)}catch(e){console.error("Erro ao carregar categorias:",e)}finally{b(!1)}})()},[a]);let h=t?p.filter(e=>d(e)!==t):p;return(0,r.jsx)("section",{className:"py-12 px-6 bg-[#FFF8F0]",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold font-['Roboto'] text-[#4A4A4A] mb-6",children:null!=i?i:"Categorias de Restaurantes em ".concat(g)}),m?(0,r.jsx)("div",{className:"flex justify-center my-8",children:(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-[#F4A261] border-t-[#D32F2F] rounded-full animate-spin"})}):(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:h.map(e=>{let i=d(e);return(0,r.jsxs)(l(),{href:"/restaurante/".concat(a,"/").concat(i),className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-4 block",children:[(0,r.jsx)("div",{className:"relative w-full h-32 overflow-hidden rounded-t-lg mb-2",children:(0,r.jsx)(s.default,{src:"/images/categories/".concat("Pastelaria"===e?"pastel":"Outros"===e?"outros":d(e),".webp"),alt:e,fill:!0,sizes:"(min-width: 1024px) 16.66vw, (min-width: 768px) 25vw, (min-width: 640px) 33.33vw, 50vw",className:"object-cover"})}),(0,r.jsx)("span",{className:"text-[#D32F2F] font-medium block text-center",children:e})]},e)})})]})})}},6104:(e,a,i)=>{let r;i.d(a,{B:()=>o,db:()=>d});var n=i(3915),t=i(5317),l=i(9563);r=0===(0,n.Dk)().length?(0,n.Wp)({apiKey:"AIzaSyAr6gwQ5LfjPfcGCvsbotVcKpxHjgeKBKc",authDomain:"gulaapp-5be3b.firebaseapp.com",projectId:"gulaapp-5be3b",storageBucket:"gulaapp-5be3b.appspot.com",messagingSenderId:"558045735007",appId:"1:558045735007:web:2fa575ffb7d1c3d14b93ea",measurementId:"G-DM7G2RGD32"}):(0,n.Dk)()[0];let s=null;function o(){if(s)return console.log("[firebase.ts] App Check already initialized."),s;console.log("[firebase.ts] Running App Check initialization function.");let e="6LdjJCArAAAAAOwjhXXvF4wKzlsaFz_gegwvtOBl";if(!e)return console.error("[firebase.ts] ERROR: NEXT_PUBLIC_RECAPTCHA_SITE_KEY is not defined!"),null;console.log("[firebase.ts] Initializing App Check with Site Key from env: ".concat(e.substring(0,5),"..."));try{return s=(0,l.Ay)(r,{provider:new l._u(e),isTokenAutoRefreshEnabled:!0}),console.log("[firebase.ts] App Check initialized successfully via function."),s}catch(e){return console.error("[firebase.ts] Error initializing App Check via function:",e),null}}let d=(0,t.aU)(r)},6766:(e,a,i)=>{i.d(a,{default:()=>n.a});var r=i(1469),n=i.n(r)}}]);