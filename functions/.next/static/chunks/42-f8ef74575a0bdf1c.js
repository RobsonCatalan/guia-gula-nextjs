"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42],{1469:(e,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),!function(e,i){for(var n in i)Object.defineProperty(e,n,{enumerable:!0,get:i[n]})}(i,{default:function(){return s},getImageProps:function(){return o}});let a=n(8229),t=n(8883),r=n(3063),l=a._(n(4615));function o(e){let{props:i}=(0,t.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"custom",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(i))void 0===n&&delete i[e];return{props:i}}let s=r.Image},3433:(e,i,n)=>{n.d(i,{HQ:()=>o,xk:()=>l});var a=n(5317),t=n(6104);let r=e=>{var i,n,a,t,r,l,o,s,d,u,c,g,p,f,m,v,b,C,h,y,w,A,k,I;return{id:e.id||"",name:e.name||"",address:(null==(n=e.fiscalInformation)||null==(i=n.fiscalAddress)?void 0:i.formattedAddress)||e.address||"",city:(null==(t=e.guideConfig)||null==(a=t.address)?void 0:a.city)||e.city||"",description:e.description||"",cuisine:e.cuisineType||e.cuisine||"",openingHours:e.openingHours||"Hor\xe1rio n\xe3o dispon\xedvel",imageUrl:e.mainPhoto||e.imageUrl||"/images/placeholder-restaurant.jpg",rating:e.rating||0,priceRange:e.priceRange||"$",phone:(null==(r=e.contactInfo)?void 0:r.phoneNumber)||e.phone||"",website:(null==(l=e.contactInfo)?void 0:l.website)||e.website||"",instagramLink:e.instagramLink||"",logo:e.logo||null,mainPhoto:e.mainPhoto||null,categories:Array.isArray(null==(o=e.guideConfig)?void 0:o.categories)?e.guideConfig.categories:[],addressStreet:(null==(d=e.guideConfig)||null==(s=d.address)?void 0:s.street)||"",addressNumber:(null==(c=e.guideConfig)||null==(u=c.address)?void 0:u.number)||"",addressComplement:(null==(p=e.guideConfig)||null==(g=p.address)?void 0:g.complement)||"",addressDistrict:(null==(m=e.guideConfig)||null==(f=m.address)?void 0:f.district)||"",addressState:(null==(b=e.guideConfig)||null==(v=b.address)?void 0:v.state)||"",postalCode:(null==(h=e.guideConfig)||null==(C=h.address)?void 0:C.postalCode)||"",addressCity:(null==(w=e.guideConfig)||null==(y=w.address)?void 0:y.city)||e.city||"",coordinates:(null==(k=e.guideConfig)||null==(A=k.address)?void 0:A.coordinates)?{latitude:e.guideConfig.address.coordinates.latitude,longitude:e.guideConfig.address.coordinates.longitude}:null,menu:Array.isArray(e.menu)?e.menu:[],workingHours:Array.isArray(null==(I=e.guideConfig)?void 0:I.workingHours)?e.guideConfig.workingHours.map(e=>({weekday:e.weekday,startTime:e.startTime,endTime:e.endTime})):[]}},l=async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{let n=(await (0,a.GG)((0,a.P)((0,a.rJ)(t.db,"places"),(0,a.My)("name")))).docs.filter(e=>{var i;return null==(i=e.data().guideConfig)?void 0:i.isVisible});n.sort((e,i)=>(e.data().name||"").localeCompare(i.data().name||""));let l=e?n.findIndex(i=>i.id===e.id)+1:0,o=n.slice(l,l+i),d=o.map(e=>r({id:e.id,...e.data()})),u=o.length?o[o.length-1]:null,c=await s(d.map(e=>e.id));return{restaurants:d.map(e=>{var i,n,a,t;return{...e,rating:null!=(a=null==(i=c[e.id])?void 0:i.avg)?a:0,reviewCount:null!=(t=null==(n=c[e.id])?void 0:n.count)?t:0}}),lastVisible:u}}catch(e){return console.error("Erro ao buscar restaurantes:",e),{restaurants:[],lastVisible:null}}},o=async function(e,i){arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let i=(0,a.P)((0,a.rJ)(t.db,"places"),(0,a.My)("name")),n=await (0,a.GG)(i),l=[];n.forEach(e=>{var i;let n=e.data();(null==(i=n.guideConfig)?void 0:i.isVisible)&&l.push(r({id:e.id,...n}))});let o=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,""),d=o(e),u=l.filter(e=>o(e.city||"")===d),c=await s(u.map(e=>e.id));return{restaurants:u.map(e=>{var i,n,a,t;return{...e,rating:null!=(a=null==(i=c[e.id])?void 0:i.avg)?a:0,reviewCount:null!=(t=null==(n=c[e.id])?void 0:n.count)?t:0}}),lastVisible:null}}catch(e){return console.error("Erro ao buscar restaurantes por cidade:",e),{restaurants:[],lastVisible:null}}},s=async e=>{let i={};for(let n=0;n<e.length;n+=10){let r=e.slice(n,n+10).map(e=>(0,a.H9)(t.db,"places",e)),l=(0,a.P)((0,a.rJ)(t.db,"placeReviews"),(0,a._M)("placeReference","in",r));(await (0,a.GG)(l)).forEach(e=>{let n=e.data(),a=n.rating,t=n.placeReference.id;i[t]||(i[t]={sum:0,count:0}),i[t].sum+=a,i[t].count+=1})}let n={};return Object.entries(i).forEach(e=>{let[i,{sum:a,count:t}]=e;n[i]={avg:parseFloat((a/t).toFixed(1)),count:t}}),n}},4615:e=>{e.exports=function(e){let{src:i,width:n,quality:a}=e;return i.startsWith("/")?i:"/api/resize?url=".concat(encodeURIComponent(i),"&w=").concat(n,"&q=").concat(a||75)}},6104:(e,i,n)=>{let a;n.d(i,{B:()=>s,db:()=>d});var t=n(3915),r=n(5317),l=n(9563);a=0===(0,t.Dk)().length?(0,t.Wp)({apiKey:"AIzaSyAr6gwQ5LfjPfcGCvsbotVcKpxHjgeKBKc",authDomain:"gulaapp-5be3b.firebaseapp.com",projectId:"gulaapp-5be3b",storageBucket:"gulaapp-5be3b.appspot.com",messagingSenderId:"558045735007",appId:"1:558045735007:web:2fa575ffb7d1c3d14b93ea",measurementId:"G-DM7G2RGD32"}):(0,t.Dk)()[0];let o=null;function s(){if(o)return console.log("[firebase.ts] App Check already initialized."),o;console.log("[firebase.ts] Running App Check initialization function.");let e="6LdjJCArAAAAAOwjhXXvF4wKzlsaFz_gegwvtOBl";if(!e)return console.error("[firebase.ts] ERROR: NEXT_PUBLIC_RECAPTCHA_SITE_KEY is not defined!"),null;console.log("[firebase.ts] Initializing App Check with Site Key from env: ".concat(e.substring(0,5),"..."));try{return o=(0,l.Ay)(a,{provider:new l._u(e),isTokenAutoRefreshEnabled:!0}),console.log("[firebase.ts] App Check initialized successfully via function."),o}catch(e){return console.error("[firebase.ts] Error initializing App Check via function:",e),null}}let d=(0,r.aU)(a)},6766:(e,i,n)=>{n.d(i,{default:()=>t.a});var a=n(1469),t=n.n(a)}}]);